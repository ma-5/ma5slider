/*!
 *   MA5-Slider - jQuery Image Slider
 *   v 1.1.2
 *   Copyright (c) 2016 Tomasz Kalinowski
 *   http://ma5slider.ma5.pl
 *   GitHub: https://github.com/ma-5/ma5slider
 */

$.widget("ma5.ma5slider",{options:{autoplayTime:3e3,anim:"anim-horizontal"},_create:function(){var e=this,a=this.element,t=a.find(".slides"),i=this._slideCount(),s=this._loopMode(),d={slides:t,slideCount:i,width:t.width(),height:t.height(),loopMode:s,currentSlide:1};if(a.length){d.loopMode!==!0&&a.addClass("first-slide");var n=a.attr("data-tempo");n=void 0===n?this.options.autoplayTime:Number(a.attr("data-tempo"));var r=a.attr("class");void 0!==r&&(~r.indexOf("anim-")||a.addClass(this.options.anim));var l=this.options.anim;a.hasClass("anim-vertical")?l="anim-vertical":a.hasClass("anim-fade")?l="anim-fade":a.hasClass("anim-horizontal")&&(l="anim-horizontal");const o=l;if(l=o,a.attr("data-initial-anim",o).addClass("dir-next"),this._createContainer(d.slides,d.width,d.height),d.slideCount<1)return d.slides.find(".slide").addClass("slide--active"),a.removeClass("inside-dots, outside-dots, left-dots, center-dots, right-dots, top-dots, bottom-dots").addClass("one-slide"),!1;d.slides.find("> .slide:nth-child("+(d.slideCount+1)+")").addClass("slide--prev"),d.slides.find("> .slide:nth-child(1)").addClass("slide--active"),d.slides.find("> .slide:nth-child(2)").addClass("slide--next"),1==d.slideCount&&a.addClass("safe-slides"),~r.indexOf("-navs")||a.addClass("hidden-navs"),~r.indexOf("-dots")||a.addClass("hidden-dots"),this._makeNav(),this._makeDots(d.slideCount),this._updateDotsColors(),this._updateNavsColors(),this._updateDirection(),this._updateAnim(1),this._firstLastDetect(1),jQuery().draggable&&this._ma5draggable(),setTimeout(function(){a.trigger("ma5.firstSlide")},1),a.find(".nav--next").on("touch click",function(){e.goToNext()}),a.find(".nav--prev").on("touch click",function(){e.goToPrev()}),a.find(".dot").on("touch click",function(){var a=Number($(this).attr("data-target"));e._goToSlideDotTarget(a)}),a.hasClass("autoplay")&&this._autoplay(n)}},goToSlide:function(e){var a=this.element,t=this._parm();"current"==e&&(e=t.currentSlide),setTimeout(function(){a.trigger("ma5.activeSlide",[e])},1);var i=this;e<1&&(e=1),e>t.slideCount&&(e=t.slideCount);var s=e;s!==t.currentSlide?(a.find(".slides > .slide--prev").addClass("js-op"),a.find(".slides > .slide--active").addClass("js-oa"),a.find(".slides > .slide--next").addClass("js-on"),a.removeClass("drag-prev drag-next"),t.loopMode===!1&&(t.currentSlide<s?a.removeClass("dir-prev").addClass("dir-next"):a.removeClass("dir-next").addClass("dir-prev")),a.find(".slide").removeClass("slide--prev slide--next"),a.find(".slide:nth-child("+s+")").addClass("slide--prev js-np"),a.find('> .dots .dot[data-target="'+s+'"]').addClass("active").siblings().removeClass("active"),this._firstLastDetect(s),this._updateAnim(s),setTimeout(function(){a.find(".slide--active.js-oa").addClass("transition-on").removeClass("slide--active js-oa").addClass("slide--next js-to-del"),a.find(".slide--prev.js-np").addClass("transition-on").removeClass("slide--prev js-op js-np").addClass("slide--active js-na"),1==s?a.find(".slide:nth-child("+t.slideCount+")").addClass("slide--prev js-np"):a.find(".slide:nth-child("+(s-1)+")").addClass("slide--prev js-np"),s==t.slideCount?a.find(".slide:nth-child(1)").addClass("slide--next js-nn"):a.find(".slide:nth-child("+(s+1)+")").addClass("slide--next js-nn"),i._updateDotsColors(),i._updateNavsColors(),i._updateDirection(),a.trigger("ma5.animationStart");var e=!0;a.find(".js-na").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){if(e===!0)return e=!1,s==t.slideCount?a.find(".js-to-del").removeClass("slide--next transition-on js-on"):a.find(".js-to-del").removeClass("slide--next transition-on"),a.find(".js-na").removeClass("transition-on"),1==t.currentSlide&&s==t.slideCount&&a.find(".slide:nth-child(1)").addClass("slide--next"),s==t.currentSlide-1&&a.find(".slide:nth-child("+(s+1)+")").addClass("slide--next"),t.slideAll.removeClass("js-op js-oa js-on js-np js-na js-nn js-to-del"),a.find("> .dots").removeClass("dots-disabled"),a.removeClass("disabled"),a.removeClass("transition-on"),s=0,t.currentSlide=0,t.slideCount=0,jQuery().draggable&&i._ma5draggable(),a.trigger("ma5.animationEnd"),!1})},60)):jQuery().draggable&&i._ma5draggable()},goToPrev:function(){var e=this.element,a=this._parm();e.hasClass("disabled")||(counter=a.currentSlide,counter--,counter<1&&(counter=a.slideCount),e.removeClass("dir-next").addClass("dir-prev disabled"),this.goToSlide(counter))},goToNext:function(){var e=this.element,a=this._parm();if(!e.hasClass("disabled"))if(counter=a.currentSlide,counter++,counter>a.slideCount){if(a.loopMode!==!0)return!1;counter=1,e.removeClass("dir-prev").addClass("dir-next disabled"),this.goToSlide(counter)}else e.removeClass("dir-prev").addClass("dir-next disabled"),this.goToSlide(counter)},goToFirst:function(){var e=this.element;e.hasClass("disabled")||(e.removeClass("dir-next").addClass("dir-prev disabled"),this.goToSlide(1))},goToLast:function(){var e=this.element,a=this._parm();e.hasClass("disabled")||(e.removeClass("dir-prev").addClass("dir-next disabled"),this.goToSlide(a.slideCount))},_parm:function(){var e=this.element,a=e.find(".slides"),t=a.find("> *").not(".canvas"),i=a.find(".slide--active"),s=a.find(".slide--prev"),d=a.find(".slide--next");return{slider:e,slides:a,slideAll:t,slideActive:i,slidePrev:s,slideNext:d,width:a.width(),height:a.height(),slideCount:Number(a.find("> *").length)-1,loopMode:e.hasClass("loop-mode"),currentSlide:Number(e.find(".slide--active").index())+1,initialAnim:e.attr("data-initial-anim")}},_slideCount:function(){var e=this.element;return Number(e.find(".slides > *").length)-1},_loopMode:function(){var e=this.element;return e.hasClass("loop-mode")},_getCurrentSlide:function(){var e=this.element;return Number(e.find(".slide--active").index())+1},_createContainer:function(e,a,t){e.children().addClass("slide"),e.append('<canvas class="canvas" width="'+a+'" height="'+t+'"></canvas>'),e.wrap('<div class="navs-wrapper"><div class="slide-area"></div></div>')},_makeNav:function(){var e=this.element;e.hasClass("vertical-navs")||e.addClass("horizontal-navs"),e.hasClass("outside-navs")||e.addClass("inside-navs"),e.find(".navs-wrapper").append('<span class="nav--prev"></span><span class="nav--next"></span>')},_makeDots:function(){var e=this.element,a=this._parm();e.hasClass("inside-dots")||e.addClass("outside-dots"),e.hasClass("vertical-dots")||(e.addClass("horizontal-dots"),e.hasClass("left-dots")||e.hasClass("right-dots")||e.addClass("center-dots"),e.hasClass("top-dots")||e.addClass("bottom-dots")),e.hasClass("vertical-dots")&&(e.hasClass("left-dots")||e.hasClass("right-dots")||e.addClass("right-dots"),e.hasClass("outside-navs horizontal-navs")&&(e.removeClass("outside-dots"),e.addClass("inside-dots right-dots"))),e.hasClass("vertical-dots")&&(e.hasClass("top-dots")&&e.hasClass("bottom-dots")||e.addClass("middle-dots"));for(var t='<span class="dots">',i="",s=1;s<=a.slideCount;s++)1===s&&(i=" active"),t=t+'<span class="dot'+i+'" data-target="'+s+'"></span>',i="";t+="</span>",e.hasClass("top-dots")?e.prepend(t):e.append(t)},_firstLastDetect:function(e){var a=this.element,t=this._parm();$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"]').removeClass("targeted"),$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"][data-ma5slide='+e+"]").addClass("targeted"),t.loopMode!==!0?(a.removeClass("last-slide first-slide"),e==t.slideCount&&(a.trigger("ma5.lastSlide"),a.addClass("last-slide"),$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"][data-ma5slide="next"]').addClass("targeted"),$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"][data-ma5slide="last"]').addClass("targeted")),1==e&&(a.trigger("ma5.firstSlide"),a.addClass("first-slide"),$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"][data-ma5slide="previous"]').addClass("targeted"),$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"][data-ma5slide="first"]').addClass("targeted"))):(e<1?e=t.slideCount:e>t.slideCount&&(e=1),e==t.slideCount&&(a.trigger("ma5.lastSlide"),$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"][data-ma5slide="last"]').addClass("targeted")),1==e&&(a.trigger("ma5.firstSlide"),$('.ma5slider__control[data-ma5slider="#'+a.attr("id")+'"][data-ma5slide="first"]').addClass("targeted")))},_updateAnim:function(e){var a=this.element;if(void 0!==a.find(".slide:nth-child("+e+")").attr("data-ma5-anim")){var t=a.find(".slide:nth-child("+e+")").attr("data-ma5-anim");a.removeClass("anim-horizontal anim-vertical anim-fade").addClass(t)}else a.removeClass("anim-horizontal anim-vertical anim-fade").addClass(a.attr("data-initial-anim"))},_updateDotsColors:function(){var e=this.element;if(void 0!==e.find(".slide--active").attr("data-ma5-dot")){var a=e.find(".slide--active").attr("data-ma5-dot");e.find('.dot:not(".active")').css("background-color",a)}else e.find(' .dot:not(".active")').css("background-color","");if(void 0!==e.find(" .slide--active").attr("data-ma5-dot-active")){var t="background-color:"+e.find(".slide--active").attr("data-ma5-dot-active");e.find(".dot.active").attr("style",t)}else e.find(".dot.active").css("background-color","")},_updateNavsColors:function(){var e=this.element;if(void 0!==e.find(".slide--active").attr("data-ma5-nav")){var a=e.find(".slide--active").attr("data-ma5-nav");e.find(".nav--prev, .nav--next").css("color",a)}else e.find(".nav--prev, .nav--next").css("color","")},_updateDirection:function(){var e=this.element;if(void 0!==e.find(".slide--active").attr("data-ma5-nav-prev-dir")){var a=e.find(".slide--active").attr("data-ma5-nav-prev-dir");e.find(".nav--prev").addClass(a)}else e.find(".nav--prev").removeClass("nav__top nav__bottom");if(void 0!==e.find(".slide--active").attr("data-ma5-nav-next-dir")){var t=e.find(".slide--active").attr("data-ma5-nav-next-dir");e.find(".nav--next").addClass(t)}else e.find(".nav--next").removeClass("nav__top nav__bottom")},_autoplay:function(e){var a=this.element,t=this,i=this._parm(),s=i.currentSlide,d=setInterval(function(){s++,s>i.slideCount&&(s=1),t.goToSlide(s)},e);a.on("touch click",function(){return clearInterval(d),!0}),i.slides.mousemove(function(){if($(this).is(".ui-draggable-dragging"))return clearInterval(d),!0})},_updateAfterPrevDrag:function(){var e=this.element,a=this._parm(),t=a.slides,i=a.currentSlide-1;e.removeClass("dir-next").addClass("dir-prev "+a.initialAnim),i>0?(e.trigger("ma5.activeSlide",[i]),e.find('> .dots .dot[data-target="'+i+'"]').addClass("active").siblings().removeClass("active")):(e.trigger("ma5.activeSlide",[a.slideCount]),e.find('> .dots .dot[data-target="'+a.slideCount+'"]').addClass("active").siblings().removeClass("active")),e.find(".slides > .slide--next").removeClass("slide--next"),e.find(".slides > .slide--active").removeClass("slide--active").addClass("slide--next"),e.find(".slides > .slide--prev").removeClass("slide--prev").addClass("slide--active"),1!=i?a.slidePrev.prev().addClass("slide--prev"):a.slideAll.last().addClass("slide--prev"),t.removeClass("dragged-prev-end dragged-next-end"),this._ma5draggable(),this._firstLastDetect(i),this._updateDotsColors(),this._updateNavsColors(),this._updateDirection(),e.trigger("ma5.animationEnd")},_updateAfterNextDrag:function(){var e=this.element,a=this._parm(),t=a.slideCount-1;e.removeClass("dir-prev").addClass("dir-next "+a.initialAnim),a.currentSlide<=t?(e.trigger("ma5.activeSlide",[a.currentSlide+1]),e.find('> .dots .dot[data-target="'+(a.currentSlide+1)+'"]').addClass("active").siblings().removeClass("active")):(e.trigger("ma5.activeSlide",[1]),e.find('> .dots .dot[data-target="1"]').addClass("active").siblings().removeClass("active")),e.find(".slides > .slide--prev").removeClass("slide--prev"),e.find(".slides > .slide--active").removeClass("slide--active").addClass("slide--prev"),e.find(".slides > .slide--next").removeClass("slide--next").addClass("slide--active"),a.currentSlide!=t?a.slideNext.next().addClass("slide--next"):a.slideAll.first().addClass("slide--next"),a.slides.removeClass("dragged-prev-end dragged-next-end"),this._ma5draggable(),this._firstLastDetect(a.currentSlide+1),this._updateDotsColors(),this._updateNavsColors(),this._updateDirection(),e.trigger("ma5.animationEnd")},_goToSlideDotTarget:function(e){var a=this.element,t=this._parm();a.find("> .dots").hasClass("dots-disabled")||(e>t.currentSlide&&a.removeClass("dir-prev").addClass("dir-next"),e<t.currentSlide&&a.removeClass("dir-next").addClass("dir-prev"),e!=t.currentSlide&&(a.find("> .dots").addClass("dots-disabled"),this.goToSlide(e)))},_ma5draggable:function(){var e=this.element;$.globalVars={originalTop:0,originalLeft:0};var a=this,t=this._parm(),i=t.slides,s=t.width,d=t.height,n={maxWidth:s,maxHeight:d,itemWidthBreakpoint:s/5,itemWidthBreakpointSub:s/5*-1,itemHeightBreakpoint:d/5,itemHeightBreakpointSub:d/5*-1,maxHeightTop:d/5,maxHeightBottom:d*-1/5,maxWidthLeft:s/5,maxWidthRight:s*-1/5};return"anim-horizontal"==t.initialAnim,i.draggable({axis:"x",revert:!0,start:function(e,a){void 0!==a.position&&($.globalVars.originalLeft=a.position.left)},drag:function(s,d){e.removeClass("dir-next dir-prev anim-fade anim-vertical").addClass("anim-horizontal");var r=d.position.left;if(d.position.left<n.maxWidthRight&&(r=n.maxWidthRight),d.position.left>n.maxWidthLeft&&(r=n.maxWidthLeft),d.position.left=r,d.position.left>0){if(t.loopMode===!1&&0===e.find(".slide--active").index());else if(e.removeClass("drag-next").addClass("drag-prev dir-prev"),d.position.left>=n.itemWidthBreakpoint)return i.draggable("option","revert",!1),e.trigger("ma5.animationStart"),i.animate({left:n.maxWidth},300,function(){i.addClass("dragged-prev-end").removeAttr("style"),a._updateAfterPrevDrag()}),!1}else if(t.loopMode===!1&&t.currentSlide==t.slideCount);else if(e.removeClass("drag-prev").addClass("drag-next dir-prev"),d.position.left<=n.itemWidthBreakpointSub)return i.draggable("option","revert",!1),e.trigger("ma5.animationStart"),i.animate({left:n.maxWidth*-1},300,function(){i.addClass("dragged-next-end").removeAttr("style"),a._updateAfterNextDrag()}),!1}}),"anim-vertical"==t.initialAnim&&i.draggable({axis:"y",revert:!0,start:function(e,a){void 0!==a.position&&($.globalVars.originalTop=a.position.top)},drag:function(s,d){e.removeClass("dir-next dir-prev anim-fade anim-horizontal").addClass("anim-vertical");var r=d.position.top;if(d.position.top>n.maxHeightTop&&(r=n.maxHeightTop),d.position.top<n.maxHeightBottom&&(r=n.maxHeightBottom),d.position.top=r,d.position.top>0){if(t.loopMode===!1&&0===e.find(".slide--active").index());else if(e.removeClass("drag-next").addClass("drag-prev dir-prev"),d.position.top>=n.itemHeightBreakpoint)return i.draggable("option","revert",!1),e.trigger("ma5.animationStart"),i.animate({top:n.maxHeight},300,function(){$(this).addClass("dragged-prev-end").removeAttr("style"),a._updateAfterPrevDrag()}),!1}else if(t.loopMode===!1&&t.currentSlide==t.slideCount);else if(e.removeClass("drag-prev").addClass("drag-next dir-prev"),d.position.top<=n.itemHeightBreakpointSub)return i.draggable("option","revert",!1),e.trigger("ma5.animationStart"),i.animate({top:n.maxHeight*-1},300,function(){i.addClass("dragged-next-end").removeAttr("style"),a._updateAfterNextDrag()}),!1}}),this}}),$(document).ready(function(){$(document).on("dragstart",".ma5slider a",function(){return!1})}),$(window).resize(function(){$(".ma5slider").ma5slider("goToSlide","current")}),$(window).on("load",function(){$(".ma5slider__control").on("touch click",function(){var e=$(this).attr("data-ma5slider"),a=($(e),$(this).attr("data-ma5slide"));"next"==a?$(e).ma5slider("goToNext"):"previous"==a?$(e).ma5slider("goToPrev"):"first"==a?$(e).ma5slider("goToFirst"):"last"==a?$(e).ma5slider("goToLast"):$(e).ma5slider("goToSlide",Number(a))})});